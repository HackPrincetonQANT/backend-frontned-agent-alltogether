# Architecture Diagram: Frontend-Backend Integration

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          USER INTERFACE                                   â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    React Frontend (Vite)                            â”‚  â”‚
â”‚  â”‚                   http://localhost:5173                             â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                Activity.tsx Component                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  State Management:                                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ transactions: Transaction[]                                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ predictions: Prediction[]                                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ loading: boolean                                           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ error: string | null                                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  useEffect() on mount:                                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    â”œâ”€ fetchUserTransactions(userId, 20)                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    â””â”€ fetchPredictions(userId, 5)                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                               â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                          â”‚                                           â”‚  â”‚
â”‚  â”‚                          â”‚ API Calls                                 â”‚  â”‚
â”‚  â”‚                          â–¼                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚           services/backendApi.ts                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ fetchUserTransactions(userId, limit)                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    GET /api/user/{userId}/transactions?limit={limit}          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ fetchPredictions(userId, limit)                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    GET /api/predict?user_id={userId}&limit={limit}            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ fetchCoachRecommendations(userId, limit)                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    GET /api/coach?user_id={userId}&limit={limit}              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                               â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ HTTP Requests
                                â”‚ (CORS enabled)
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        BACKEND API LAYER                                  â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              FastAPI Server (Python)                               â”‚  â”‚
â”‚  â”‚             http://localhost:8000                                  â”‚  â”‚
â”‚  â”‚                                                                     â”‚  â”‚
â”‚  â”‚  CORS Middleware                                                    â”‚  â”‚
â”‚  â”‚  âœ“ allow_origins: [localhost:5173, localhost:3000]                 â”‚  â”‚
â”‚  â”‚  âœ“ allow_methods: ["*"]                                            â”‚  â”‚
â”‚  â”‚  âœ“ allow_headers: ["*"]                                            â”‚  â”‚
â”‚  â”‚                                                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚              API Endpoints                                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  GET /api/user/{user_id}/transactions                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    â””â”€ Returns: Transaction[]                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚       â€¢ id: string                                           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚       â€¢ item: string                                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚       â€¢ amount: number                                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚       â€¢ date: ISO8601 timestamp                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚       â€¢ category: string                                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  GET /api/predict                                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    â””â”€ Returns: Prediction[]                                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚       â€¢ item_name: string                                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚       â€¢ category: string                                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚       â€¢ last_purchase: ISO8601 timestamp                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚       â€¢ next_predicted: ISO8601 timestamp                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚       â€¢ avg_interval_days: number                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚       â€¢ confidence: number (0-1)                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚       â€¢ estimated_price: number                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  GET /api/coach                                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    â””â”€ Returns: CoachResponse                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚       â€¢ message: string (AI-generated)                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚       â€¢ predictions: Prediction[]                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚       â€¢ recent_transactions: Transaction[]                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                              â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                         â”‚                                           â”‚  â”‚
â”‚  â”‚                         â”‚ SQL Queries                               â”‚  â”‚
â”‚  â”‚                         â–¼                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚               Database Layer (db.py)                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ fetch_all(query, params)                                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ execute(query, params)                                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                              â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ Snowflake Connector
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DATA LAYER                                        â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   Snowflake Database                               â”‚  â”‚
â”‚  â”‚         SNOWFLAKE_LEARNING_DB.BALANCEIQ_CORE                       â”‚  â”‚
â”‚  â”‚                                                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚             PURCHASE_ITEMS_TEST                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Columns:                                                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ ITEM_ID                                                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ USER_ID                                                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ ITEM_NAME                                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ MERCHANT                                                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ PRICE                                                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ TS (timestamp)                                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ CATEGORY                                                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                              â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Sequence

```
1. User Opens Activity Tab
   â”‚
   â–¼
2. Activity Component Mounts
   â”‚
   â–¼
3. useEffect() Hook Triggers
   â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                         â”‚                         â”‚
   â–¼                         â–¼                         â–¼
   fetchUserTransactions    fetchPredictions      Show Loading
   â”‚                         â”‚
   â–¼                         â–¼
4. API Service Layer (backendApi.ts)
   â”‚                         â”‚
   â”œâ”€ Build URL             â”œâ”€ Build URL
   â”œâ”€ Add Headers           â”œâ”€ Add Headers
   â”œâ”€ Send GET Request      â”œâ”€ Send GET Request
   â”‚                         â”‚
   â–¼                         â–¼
5. FastAPI Backend (main.py)
   â”‚                         â”‚
   â”œâ”€ Check CORS            â”œâ”€ Check CORS
   â”œâ”€ Validate Params       â”œâ”€ Validate Params
   â”œâ”€ Call db.fetch_all()   â”œâ”€ Call predictor
   â”‚                         â”‚
   â–¼                         â–¼
6. Database Layer (db.py)
   â”‚                         â”‚
   â”œâ”€ Connect to Snowflake  â”œâ”€ Query & Analyze
   â”œâ”€ Execute SQL           â”œâ”€ Calculate Predictions
   â”œâ”€ Fetch Results         â”‚
   â”‚                         â”‚
   â–¼                         â–¼
7. Snowflake Database
   â”‚                         â”‚
   â”œâ”€ Query PURCHASE_ITEMS  â”œâ”€ Aggregate Data
   â”œâ”€ Filter by USER_ID     â”œâ”€ Compute Intervals
   â”œâ”€ Order by TS DESC      â”‚
   â”œâ”€ Limit Results         â”‚
   â”‚                         â”‚
   â–¼                         â–¼
8. Return to Backend
   â”‚                         â”‚
   â”œâ”€ Format as JSON        â”œâ”€ Format as JSON
   â”œâ”€ Add CORS headers      â”œâ”€ Add CORS headers
   â”‚                         â”‚
   â–¼                         â–¼
9. Return to Frontend
   â”‚                         â”‚
   â”œâ”€ Parse JSON            â”œâ”€ Parse JSON
   â”œâ”€ Validate Types        â”œâ”€ Validate Types
   â”‚                         â”‚
   â–¼                         â–¼
10. Update Component State
    â”‚
    â”œâ”€ setTransactions(data)
    â”œâ”€ setPredictions(data)
    â”œâ”€ setLoading(false)
    â”‚
    â–¼
11. Re-render UI
    â”‚
    â”œâ”€ Group by Category
    â”œâ”€ Format Dates/Times
    â”œâ”€ Calculate Totals
    â”œâ”€ Display Cards
    â”‚
    â–¼
12. User Sees Real Data! ðŸŽ‰
```

## Component Tree

```
App.tsx
  â”‚
  â”œâ”€ SignedIn/SignedOut (Clerk)
  â”‚
  â””â”€ Navbar
      â”‚
      â””â”€ Activity.tsx â—„â”€â”€â”€ WE'RE HERE!
          â”‚
          â”œâ”€ Tab Navigation
          â”‚   â”œâ”€ Recently
          â”‚   â””â”€ Connections
          â”‚
          â”œâ”€ Loading State
          â”‚   â””â”€ Spinner
          â”‚
          â”œâ”€ Error State
          â”‚   â””â”€ Error Message
          â”‚
          â””â”€ Data Display
              â”‚
              â”œâ”€ Transaction Cards
              â”‚   â”œâ”€ Grouped by Category
              â”‚   â”‚   â”œâ”€ Coffee â˜•
              â”‚   â”‚   â”œâ”€ Food ðŸ”
              â”‚   â”‚   â”œâ”€ Groceries ðŸ›’
              â”‚   â”‚   â””â”€ Other ðŸ’°
              â”‚   â”‚
              â”‚   â””â”€ Each Card Shows:
              â”‚       â”œâ”€ Category Icon & Name
              â”‚       â”œâ”€ Transaction Count
              â”‚       â”œâ”€ Individual Transactions
              â”‚       â””â”€ Category Total
              â”‚
              â””â”€ Prediction Cards
                  â””â”€ Each Card Shows:
                      â”œâ”€ Item Name & Category
                      â”œâ”€ Last Purchase Date
                      â”œâ”€ Predicted Next Date
                      â”œâ”€ Confidence Score
                      â””â”€ Estimated Cost
```

## Type System

```typescript
// Frontend Types (src/types/index.ts)

interface Transaction {
  id: string;
  item: string;
  amount: number;
  date: string;        // ISO8601 timestamp
  category: string;
}

interface Prediction {
  item_name: string;
  category: string;
  last_purchase: string;     // ISO8601 timestamp
  next_predicted: string;    // ISO8601 timestamp
  avg_interval_days: number;
  confidence: number;        // 0.0 - 1.0
  estimated_price: number;
}

// Backend Models (api/models.py)

class TransactionInsert(BaseModel):
  id: str
  user_id: str
  merchant: str
  item: str
  amount: float
  timestamp: datetime

class UserReply(BaseModel):
  id: str
  transaction_id: str
  user_label: str
  updated_at: datetime
```

## Error Handling Flow

```
API Call
  â”‚
  â”œâ”€ Try Block
  â”‚   â”œâ”€ Fetch Data
  â”‚   â”œâ”€ Check Response Status
  â”‚   â”œâ”€ Parse JSON
  â”‚   â””â”€ Return Data
  â”‚
  â”œâ”€ Catch Block
  â”‚   â”œâ”€ Log Error
  â”‚   â”œâ”€ Throw Error
  â”‚   â”‚
  â”‚   â””â”€ Component Catches
  â”‚       â”œâ”€ setError(message)
  â”‚       â””â”€ Display Error UI
  â”‚
  â””â”€ Finally Block
      â””â”€ setLoading(false)
```

## Environment Configuration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     .env (Frontend)                 â”‚
â”‚                                     â”‚
â”‚  VITE_BACKEND_API_URL=              â”‚
â”‚    http://localhost:8000            â”‚
â”‚                                     â”‚
â”‚  VITE_CLERK_PUBLISHABLE_KEY=        â”‚
â”‚    pk_test_...                      â”‚
â”‚                                     â”‚
â”‚  VITE_NESSIE_API_KEY=               â”‚
â”‚    your_key_here                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼ Used by
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  services/backendApi.ts             â”‚
â”‚                                     â”‚
â”‚  const getBackendUrl = () => {      â”‚
â”‚    return import.meta.env           â”‚
â”‚      .VITE_BACKEND_API_URL ||       â”‚
â”‚      'http://localhost:8000';       â”‚
â”‚  }                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This architecture enables:
- âœ… Real-time data fetching
- âœ… Type-safe API communication
- âœ… Proper error handling
- âœ… Scalable structure
- âœ… Easy maintenance
